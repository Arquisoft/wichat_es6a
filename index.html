<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.23">
<title>wichat_es6a</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/*! Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment the following line when using as a custom stylesheet */
/* @import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"; */
html{font-family:sans-serif;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
b,strong{font-weight:bold}
abbr{font-size:.9em}
abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}
dfn{font-style:italic}
hr{height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type=checkbox],input[type=radio]{padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,::before,::after{box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.square{list-style-type:square}
ul.circle ul:not([class]),ul.disc ul:not([class]),ul.square ul:not([class]){list-style:inherit}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:1px solid #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 0 0 .1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin:0 auto;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child{border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:flex;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:hsla(0,0%,100%,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details{margin-left:1.25rem}
details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;outline:none;-webkit-tap-highlight-color:transparent}
details>summary::-webkit-details-marker{display:none}
details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}
details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}
details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border:1px solid #e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;border-radius:4px}
.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:first-child,.sidebarblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child,.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos,pre.pygments .linenos{border-right:1px solid;opacity:.35;padding-right:.5em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
pre.pygments span.linenos{display:inline-block;margin-right:.75em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans-serif;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all>*>tr,table.stripes-odd>*>tr:nth-of-type(odd),table.stripes-even>*>tr:nth-of-type(even),table.stripes-hover>*>tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
li>p:empty:only-child::before{content:"";display:inline-block}
ul.checklist>li>p:first-child{margin-left:-1em}
ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist>li>p:first-child>input[type=checkbox]:first-child{margin-right:.25em}
ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active,#footnotes .footnote a:first-of-type:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt,summary{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,td.hdlist1,span.alt,summary{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]{border-bottom:1px dotted}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media amzn-kf8,print{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
</head>
<body class="article">
<div id="header">
<h1><span class="image"><img src="./images/arc42-logo.png" alt="arc42"></span> wichat_es6a</h1>
<div class="details">
<span id="revnumber">version 8.2 EN,</span>
<span id="revdate">January 2023</span>
<br><span id="revremark">(based upon AsciiDoc version)</span>
</div>
<div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#section-introduction-and-goals">1. Introduction and Goals</a>
<ul class="sectlevel2">
<li><a href="#_context_and_motivation">1.1. Context and Motivation</a></li>
<li><a href="#_key_requirements">1.2. Key Requirements</a></li>
<li><a href="#_quality_objectives">1.3. Quality Objectives</a></li>
<li><a href="#_stakeholders">1.4. Stakeholders</a></li>
</ul>
</li>
<li><a href="#section-constraints">2. Constraints</a>
<ul class="sectlevel2">
<li><a href="#_technical_constraints">2.1. Technical Constraints</a></li>
<li><a href="#_organizational_constraints">2.2. Organizational Constraints</a></li>
<li><a href="#_security_and_privacy_constraints">2.3. Security and Privacy Constraints</a></li>
</ul>
</li>
<li><a href="#section-context-and-scope">3. Context and Scope</a>
<ul class="sectlevel2">
<li><a href="#_business_context">3.1. Business Context</a></li>
<li><a href="#_technical_context">3.2. Technical Context</a></li>
</ul>
</li>
<li><a href="#section-solution-strategy">4. Solution Strategy</a>
<ul class="sectlevel2">
<li><a href="#_organizational_decisions">4.1. Organizational Decisions</a></li>
<li><a href="#_technical_decisions">4.2. Technical Decisions</a></li>
<li><a href="#_quality_and_maintainability_decisions">4.3. Quality and Maintainability Decisions</a></li>
</ul>
</li>
<li><a href="#section-building-block-view">5. Building Block View</a>
<ul class="sectlevel2">
<li><a href="#_high_level_system_overview_context_recap">5.1. High-Level System Overview (Context Recap)</a></li>
<li><a href="#_whitebox_overall_system_level_1">5.2. Whitebox Overall System (Level 1)</a></li>
<li><a href="#_important_interfaces_summary">5.3. Important Interfaces (Summary)</a></li>
</ul>
</li>
<li><a href="#level2-refinements">6. Level 2 (Refinements)</a>
<ul class="sectlevel2">
<li><a href="#_white_box_llm_service_hint_service">6.1. White Box LLM Service (Hint Service)</a></li>
</ul>
</li>
<li><a href="#level3-concepts">7. Level 3 (Refinements / Concepts)</a>
<ul class="sectlevel2">
<li><a href="#_concept_question_generation_and_storage_flow">7.1. Concept: Question Generation and Storage Flow</a></li>
<li><a href="#_concept_statistics_calculation">7.2. Concept: Statistics Calculation</a></li>
</ul>
</li>
<li><a href="#section-runtime-view">8. Runtime View</a>
<ul class="sectlevel3">
<li><a href="#_user_registration">8.1. User Registration</a></li>
<li><a href="#_user_login">8.2. User Login</a></li>
<li><a href="#_question_generation">8.3. Question Generation</a></li>
<li><a href="#_answering_a_question">8.4. Answering a Question</a></li>
<li><a href="#_ask_for_a_hint_to_the_ai_chat">8.5. Ask for a hint to the AI Chat</a></li>
<li><a href="#_user_password_change">8.6. User Password Change</a></li>
</ul>
</li>
<li><a href="#section-deployment-view">9. Deployment View</a>
<ul class="sectlevel2">
<li><a href="#_infrastructure_level_1">9.1. Infrastructure Level 1</a></li>
</ul>
</li>
<li><a href="#section-concepts">10. Cross-cutting Concepts</a>
<ul class="sectlevel2">
<li><a href="#_user_experience_ux">10.1. User Experience (UX)</a></li>
<li><a href="#_security_protection">10.2. Security &amp; Protection</a></li>
<li><a href="#_under_the_hood">10.3. Under-the-Hood</a></li>
<li><a href="#_development">10.4. Development</a></li>
<li><a href="#_architectural_style">10.5. Architectural Style</a></li>
<li><a href="#_concept_map">10.6. Concept Map</a></li>
</ul>
</li>
<li><a href="#section-design-decisions">11. Architecture Decisions</a></li>
<li><a href="#_technology_decisions">12. Technology Decisions</a></li>
<li><a href="#section-quality-scenarios">13. Quality Requirements</a>
<ul class="sectlevel2">
<li><a href="#_quality_tree">13.1. Quality Tree</a></li>
<li><a href="#_quality_scenarios">13.2. Quality Scenarios</a></li>
</ul>
</li>
<li><a href="#section-risks-and-technical-debt">14. Risks and Technical Debt</a>
<ul class="sectlevel2">
<li><a href="#_technical_risks">14.1. Technical Risks</a></li>
<li><a href="#_technical_debt">14.2. Technical Debt</a></li>
</ul>
</li>
<li><a href="#section-glossary">15. Glossary</a></li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<style>
.arc42help {font-size:small; width: 14px; height: 16px; overflow: hidden; position: absolute; right: 0; padding: 2px 0 3px 2px;}
.arc42help::before {content: "?";}
.arc42help:hover {width:auto; height: auto; z-index: 100; padding: 10px;}
.arc42help:hover::before {content: "";}
@media print {
	.arc42help {display:none;}
}
</style>
<div class="paragraph">
<p><strong>About arc42</strong></p>
</div>
<div class="paragraph lead">
<p>arc42, the template for documentation of software and system architecture.</p>
</div>
<div class="paragraph">
<p>Template Version 8.2 EN. (based upon AsciiDoc version), January 2023</p>
</div>
<div class="paragraph">
<p>Created, maintained and &#169; by Dr. Peter Hruschka, Dr. Gernot Starke and contributors.
See <a href="https://arc42.org" class="bare">https://arc42.org</a>.</p>
</div>
<hr>
<div class="sidebarblock arc42help">
<div class="content">
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>This version of the template contains some help and explanations.
It is used for familiarization with arc42 and the understanding of the concepts.
For documentation of your own system you use better the <em>plain</em> version.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
<div class="sect1">
<h2 id="section-introduction-and-goals">1. Introduction and Goals</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_context_and_motivation">1.1. Context and Motivation</h3>
<div class="paragraph">
<p>WIChat is a web-based question-and-answer application where users must guess the location of an image. The platform automatically generates questions based on Wikidata and allows users to receive hints through an external language model (LLM). This functionality adds a conversational component to the game, enhancing the user experience.</p>
</div>
<div class="paragraph">
<p>RTVE has contracted ChattySw to update an experimental version of the online contest previously developed by HappySw, incorporating new interactive hint functionalities and improving the gameplay experience.</p>
</div>
</div>
<div class="sect2">
<h3 id="_key_requirements">1.2. Key Requirements</h3>
<div class="paragraph">
<p>The system must meet the following requirements:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A web application accessible from any browser.</p>
</li>
<li>
<p>User registration and authentication.</p>
</li>
<li>
<p>Automatic question generation based on Wikidata.</p>
</li>
<li>
<p>The ability to obtain hints generated by a language model (LLM) via an API.</p>
</li>
<li>
<p>Validation and mitigation of incorrect responses from the language model.</p>
</li>
<li>
<p>Time control for answering each question.</p>
</li>
<li>
<p>A documented API for accessing questions and user data.</p>
</li>
<li>
<p>Automatic generation of correct and incorrect answers (distractors).</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_quality_objectives">1.3. Quality Objectives</h3>
<div class="paragraph">
<p>The following quality objectives will guide architectural decisions:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 28.5714%;">
<col style="width: 28.5714%;">
<col style="width: 42.8572%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Objective</th>
<th class="tableblock halign-left valign-top">Priority</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Scalability</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">High</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The system must support a growing number of users without affecting performance.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Availability</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">High</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The application must be available at all times with minimal downtime.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Security</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">High</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Protection of user data and validation of responses generated by the LLM.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Usability</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Medium</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Intuitive interface and smooth user experience.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maintainability</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Medium</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Modular and well-documented code to facilitate future improvements.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_stakeholders">1.4. Stakeholders</h3>
<div class="paragraph">
<p>The following stakeholders are involved in the development and use of the system:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 40%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Role</th>
<th class="tableblock halign-left valign-top">Contact</th>
<th class="tableblock halign-left valign-top">Expectations</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Client (RTVE)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="mailto:rtve@rtve.es">rtve@rtve.es</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ensure that the application meets contract requirements.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Development Team (ChattySw)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="mailto:devteam@chattysw.com">devteam@chattysw.com</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Implement the system according to quality objectives.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Users</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Registered in the application</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Access an interactive and seamless gaming experience.</p></td>
</tr>
</tbody>
</table>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="section-constraints">2. Constraints</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_technical_constraints">2.1. Technical Constraints</h3>
<div class="paragraph">
<p>The following technical constraints affect the development of WIChat:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Web Technology:</strong> The application must be developed using modern web technologies (React.js for the frontend and Node.js/Python for the backend).</p>
</li>
<li>
<p><strong>Database:</strong> PostgreSQL or MongoDB will be used for data storage.</p>
</li>
<li>
<p><strong>Language Model:</strong> A language model (LLM) will be integrated through an external API.</p>
</li>
<li>
<p><strong>Question Source:</strong> Questions must be automatically generated based on Wikidata data.</p>
</li>
<li>
<p><strong>Response Time:</strong> Answers to questions must be recorded within a set time limit.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_organizational_constraints">2.2. Organizational Constraints</h3>
<div class="paragraph">
<p>The following organizational constraints affect the project:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Delivery Deadlines:</strong> The application must be operational before the project closure as agreed.</p>
</li>
<li>
<p><strong>Documentation:</strong> The architecture and development must be documented following the arc42 standard.</p>
</li>
<li>
<p><strong>Open Source:</strong> The source code must be hosted in an accessible repository for review and tracking.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_security_and_privacy_constraints">2.3. Security and Privacy Constraints</h3>
<div class="paragraph">
<p>To ensure user security and privacy, the following constraints are established:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Data Management:</strong> User data must be protected in compliance with data protection regulations.</p>
</li>
<li>
<p><strong>Response Validation:</strong> Potential errors or "hallucinations" from the language model must be mitigated to prevent incorrect information in hints.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>These constraints will define the boundaries within which WIChat will be designed and developed.</p>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="section-context-and-scope">3. Context and Scope</h2>
<div class="sectionbody">
<div class="sidebarblock arc42help">
<div class="content">
<div class="paragraph">
<div class="title">Contents</div>
<p>Context and scope - as the name suggests - delimits your system (i.e. your scope) from all its communication partners
(neighboring systems and users, i.e. the context of your system). It thereby specifies the external interfaces.</p>
</div>
<div class="paragraph">
<p>If necessary, differentiate the business context (domain specific inputs and outputs) from the technical context (channels, protocols, hardware).</p>
</div>
<div class="paragraph">
<div class="title">Motivation</div>
<p>The domain interfaces and technical interfaces to communication partners are among your system&#8217;s most critical aspects. Make sure that you completely understand them.</p>
</div>
<div class="paragraph">
<div class="title">Form</div>
<p>Various options:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Context diagrams</p>
</li>
<li>
<p>Lists of communication partners and their interfaces.</p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title">Further Information</div>
<p>See <a href="https://docs.arc42.org/section-3/">Context and Scope</a> in the arc42 documentation.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_business_context">3.1. Business Context</h3>
<div class="sidebarblock arc42help">
<div class="content">
<div class="paragraph">
<div class="title">Contents</div>
<p>Specification of <strong>all</strong> communication partners (users, IT-systems, &#8230;&#8203;) with explanations of domain specific inputs and outputs or interfaces.
Optionally you can add domain specific formats or communication protocols.</p>
</div>
<div class="paragraph">
<div class="title">Motivation</div>
<p>All stakeholders should understand which data are exchanged with the environment of the system.</p>
</div>
<div class="paragraph">
<div class="title">Form</div>
<p>All kinds of diagrams that show the system as a black box and specify the domain interfaces to communication partners.</p>
</div>
<div class="paragraph">
<p>Alternatively (or additionally) you can use a table.
The title of the table is the name of your system, the three columns contain the name of the communication partner, the inputs, and the outputs.</p>
</div>
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/Business_context.png" alt="Business context">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_technical_context">3.2. Technical Context</h3>
<div class="sidebarblock arc42help">
<div class="content">
<div class="paragraph">
<div class="title">Contents</div>
<p>Technical interfaces (channels and transmission media) linking your system to its environment. In addition a mapping of domain specific input/output to the channels, i.e. an explanation which I/O uses which channel.</p>
</div>
<div class="paragraph">
<div class="title">Motivation</div>
<p>Many stakeholders make architectural decision based on the technical interfaces between the system and its context. Especially infrastructure or hardware designers decide these technical interfaces.</p>
</div>
<div class="paragraph">
<div class="title">Form</div>
<p>E.g. UML deployment diagram describing channels to neighboring systems,
together with a mapping table showing the relationships between channels and input/output.</p>
</div>
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/Technical_context.png" alt="Technical context">
</div>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="section-solution-strategy">4. Solution Strategy</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_organizational_decisions">4.1. Organizational Decisions</h3>
<div class="ulist">
<ul>
<li>
<p><strong>Adopting a Kanban-style project management</strong>:
The team employs a Kanban approach to organize and visualize the software development process. Tasks are represented on a Kanban board, facilitating prioritization and fostering team-wide transparency. This methodology enhances focus by limiting work in progress (WIP), promoting continuous delivery and helping the team identify process bottlenecks early.</p>
</li>
<li>
<p><strong>Using GitHub Flow as the development workflow</strong>:
GitHub Flow is adopted to ensure a clear and collaborative development process. It encourages the use of short-lived feature branches and enforces Pull Request-based code reviews. This ensures that every change is peer-reviewed before integration, increasing stability and maintaining consistent code quality.</p>
</li>
<li>
<p><strong>Continuous Integration with GitHub Actions and SonarQube</strong>:
A CI pipeline is implemented using GitHub Actions to automatically run tests and code quality checks on every push. SonarQube is integrated to analyze code for bugs, vulnerabilities, code smells, and duplications. These tools provide immediate feedback, ensuring issues are addressed before deployment and reinforcing best practices.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_technical_decisions">4.2. Technical Decisions</h3>
<div class="ulist">
<ul>
<li>
<p><strong>Starting the project from scratch with custom configuration</strong>:
While a reference project exists, the development team opted to build the system from the ground up. This decision fosters a deeper understanding of the architecture, eliminates dependencies on legacy code, and enables customization aligned with current needs. The prior implementation serves strictly as a conceptual guide.</p>
</li>
<li>
<p><strong>Using MongoDB as the database</strong>:
MongoDB, a document-oriented NoSQL database, was selected for its flexibility, scalability, and alignment with the application’s data model. Its familiarity within the team and prior successful usage further reinforce this choice.</p>
</li>
<li>
<p><strong>Using Gemini LLM for response generation</strong>:
After testing several large language models, Gemini was selected due to its superior performance in generating relevant and context-aware responses to user prompts. Its integration facilitates intelligent, adaptive behavior in the application’s core logic.</p>
</li>
<li>
<p><strong>Using JavaScript as the primary programming language</strong>:
JavaScript is chosen for its ubiquity in web development, extensive ecosystem, and strong support for full-stack development via Node.js. The team’s familiarity with the language ensures faster development cycles and reduces onboarding time.</p>
</li>
<li>
<p><strong>Using Node.js as the backend environment</strong>:
Node.js is used to build the server-side logic due to its asynchronous event-driven architecture and seamless integration with JavaScript. It is well-suited for handling concurrent requests in real-time applications such as quizzes.</p>
</li>
<li>
<p><strong>Using Material UI as the UI framework</strong>:
Material UI accelerates front-end development by offering a comprehensive set of customizable, accessible components. It ensures visual consistency while reducing the amount of custom styling and layout logic needed.</p>
</li>
<li>
<p><strong>Using Docker for service deployment</strong>:
Docker is employed to containerize application components, enabling environment consistency, isolated testing, easier scaling, and streamlined deployment pipelines.</p>
</li>
<li>
<p><strong>Using Azure as the cloud platform</strong>:
Microsoft Azure is selected for its robust cloud services, seamless DevOps integration, enterprise-level security, and global infrastructure. Azure’s CI/CD support and monitoring tools align well with the project’s operational requirements.</p>
</li>
<li>
<p><strong>Using a Linux-based server environment</strong>:
Linux is chosen for hosting the application due to its reliability, performance efficiency, and compatibility with modern development and automation tools.</p>
</li>
<li>
<p><strong>Separation of game logic and UI components</strong>:
To ensure maintainability and testability, core game functionality (e.g., score tracking, validation logic, question selection) is decoupled from presentation components. This separation enforces single responsibility and supports future extensibility.</p>
</li>
<li>
<p><strong>Using <code>setInterval</code> to manage game timers</strong>:
Timed gameplay requires precise countdown control. The use of <code>setInterval</code> with timestamp drift correction enables consistent and reliable timer behavior, even under varying load conditions.</p>
</li>
<li>
<p><strong>Anonymous play support (no login required)</strong>:
Users can access and play quizzes without authentication. However, to preserve data integrity, only authenticated users have access to statistics, history, and profile management. This improves accessibility without compromising personalization for logged-in users.</p>
</li>
<li>
<p><strong>User profile editing and password update</strong>:
Authenticated users are allowed to manage personal details and change their passwords through secure interfaces. Proper validation and feedback mechanisms are integrated to ensure usability and security.</p>
</li>
<li>
<p><strong>Using bcrypt to protect user passwords</strong>:
All stored passwords are hashed using bcrypt, which provides built-in salting and adaptive hashing to resist brute-force and rainbow table attacks. This aligns with industry best practices for secure authentication.</p>
</li>
<li>
<p><strong>Game modes based on thematic categories</strong>:
To enhance user engagement, the application supports multiple quiz modes including <strong>Countries</strong>, <strong>Music</strong>, <strong>Cinema</strong>, and <strong>Mixed Mode</strong>. This allows users to tailor their experience based on personal interests.</p>
</li>
<li>
<p><strong>Daily question generation via cron + Wikidata</strong>:
An automated cron job fetches and generates new quiz questions daily from Wikidata. This ensures the application remains dynamic, up-to-date, and free from manual content entry requirements.</p>
</li>
<li>
<p><strong>Using Swagger for API documentation</strong>:
Swagger (OpenAPI) is integrated to document all API endpoints interactively. Developers can view, test, and understand the API via a visual interface, which streamlines both internal development and third-party integration efforts.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_quality_and_maintainability_decisions">4.3. Quality and Maintainability Decisions</h3>
<div class="ulist">
<ul>
<li>
<p><strong>Using GitHub Flow and Pull Requests for code review</strong>:
Pull Requests are enforced across all feature and bug-fix branches. Each submission is subject to peer review, ensuring that standards are met, potential defects are caught early, and collaboration remains transparent.</p>
</li>
<li>
<p><strong>Using Jest for unit testing</strong>:
Jest is used to test application logic at the unit level. It offers fast test execution, easy mocking, and snapshot testing, making it well-suited for JavaScript-based projects.</p>
</li>
<li>
<p><strong>Using jest-cucumber for BDD-style testing</strong>:
Test scenarios are written in Gherkin syntax using <code>jest-cucumber</code>, improving test readability and enabling non-developers to participate in test definition. This supports behavior-driven development (BDD) and improves communication across technical and business stakeholders.</p>
</li>
<li>
<p><strong>Using pepeter for React component testing</strong>:
Pepeter is used to create expressive, readable tests for React components. It simplifies interaction simulation and state validation, allowing for deeper and more maintainable component-level testing.</p>
</li>
<li>
<p><strong>Using Cypress for end-to-end testing</strong>:
Cypress is adopted for testing complete user flows, such as answering questions, submitting results, and navigating through different parts of the application. This ensures high confidence in the stability of the application post-deployment.</p>
</li>
<li>
<p><strong>Using Ruby for documentation deployment</strong>:
Ruby is selected as the documentation deployment environment based on tooling compatibility. Existing scripts and setup guides are designed for Ruby, minimizing setup overhead and ensuring smooth integration with the documentation pipeline.</p>
</li>
<li>
<p><strong>Modular and testable code structure</strong>:
The codebase is designed following modular principles, where each component or module fulfills a single, well-defined responsibility. This approach promotes testability, simplifies debugging, and improves long-term maintainability.</p>
</li>
</ul>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="section-building-block-view">5. Building Block View</h2>
<div class="sectionbody">
<hr>
<div class="paragraph">
<p>This view shows the static decomposition of the WIChat system into its main building blocks (components, services) and outlines their responsibilities and primary relationships.</p>
</div>
<div class="sect2">
<h3 id="_high_level_system_overview_context_recap">5.1. High-Level System Overview (Context Recap)</h3>
<hr>
<div class="paragraph">
<p>The following diagram shows the WIChat system as a whole (blackbox), interacting with the primary user and external data/service providers (Wikidata, LLM).</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="./images/BuildingBlockViewFirst.png" alt="High-Level Context Diagram">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_whitebox_overall_system_level_1">5.2. Whitebox Overall System (Level 1)</h3>
<hr>
<div class="paragraph">
<p>This section describes the top-level decomposition of the WIChat trivia game system into its internal microservices and components.</p>
</div>
<div class="sect3">
<h4 id="_overview_diagram_level_1">5.2.1. Overview Diagram (Level 1)</h4>
<hr>
<div class="paragraph">
<p>The following diagram shows the main internal building blocks (Level 1) of the WIChat system and their primary interactions.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="./images/BuildingBlockView2.png" alt="Level 1 Whitebox Diagram for WIChat System">
</div>
</div>
</div>
<div class="sect3">
<h4 id="_motivation">5.2.2. Motivation</h4>
<hr>
<div class="paragraph">
<p>The WIChat system is decomposed into microservices (Level 1) to:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Separation of Concerns:</strong> UI (<code>WebApp</code>), routing/aggregation (<code>Gateway Service</code>), user management (<code>Users Service</code>), authentication (<code>Auth Service</code>), question logic (<code>Question Service</code>), history/statistics (<code>History Service</code>), interaction/cache with Wikidata (<code>Wikidata Service</code>), AI suggestions (<code>LLM Service</code>).</p>
</li>
<li>
<p><strong>Independent Scalability:</strong> Scale each service based on demand (e.g., <code>Question Service</code> during gameplay, <code>Auth Service</code> during peak logins).</p>
</li>
<li>
<p><strong>Technological Flexibility:</strong> Allows different technologies per service and independent upgrades.</p>
</li>
<li>
<p><strong>Maintainability &amp; Testability:</strong> Smaller services are easier to manage, test, and deploy.</p>
</li>
<li>
<p><strong>Resilience:</strong> Failures in non-critical services (e.g., <code>LLM Service</code>) have minimal impact on core gameplay.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_level_1_building_blocks_blackboxes">5.2.3. Level 1 Building Blocks (Blackboxes)</h4>
<hr>
<div class="sect4">
<h5 id="_webapp_frontend"><code>WebApp</code> (Frontend)</h5>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>Responsibility</strong></dt>
<dd>
<p>Provides the interactive web interface. Displays questions, answers, images, score, statistics, and user profile. Communicates only with the <code>Gateway Service</code>.</p>
</dd>
<dt class="hdlist1"><strong>Interfaces (Consumed)</strong></dt>
<dd>
<p>Gateway API (REST/WebSocket).</p>
</dd>
</dl>
</div>
<hr>
</div>
<div class="sect4">
<h5 id="_gateway_service"><code>Gateway Service</code></h5>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>Responsibility</strong></dt>
<dd>
<p>Single entry point. Routes requests to microservices (<code>Auth</code>, <code>Users</code>, <code>Questions</code>, <code>History</code>, <code>LLM</code>, <code>Wikidata</code>), handles CORS, basic validation, exposes Swagger and metrics (Prometheus), checks downstream services’ health.</p>
</dd>
<dt class="hdlist1"><strong>Interfaces</strong></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><strong>Provided:</strong> Gateway API (REST), <code>/metrics</code>, <code>/health</code>, <code>/api-doc</code>.</p>
</li>
<li>
<p><strong>Consumed:</strong> Auth, Users, Question, History, LLM, Wikidata APIs.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><strong>Technology</strong></dt>
<dd>
<p>Node.js, Express, Axios.</p>
</dd>
</dl>
</div>
<hr>
</div>
<div class="sect4">
<h5 id="_auth_service"><code>Auth Service</code></h5>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>Responsibility</strong></dt>
<dd>
<p>User authentication (validation and JWT issuance).</p>
</dd>
<dt class="hdlist1"><strong>Interfaces</strong></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><strong>Provided:</strong> <code>/login</code> (REST).</p>
</li>
<li>
<p><strong>Consumed:</strong> Users Service or direct database access.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><strong>Technology</strong></dt>
<dd>
<p>Node.js/Express.</p>
</dd>
</dl>
</div>
<hr>
</div>
<div class="sect4">
<h5 id="_users_service"><code>Users Service</code></h5>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>Responsibility</strong></dt>
<dd>
<p>CRUD operations for users, avatar management.</p>
</dd>
<dt class="hdlist1"><strong>Interfaces</strong></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><strong>Provided:</strong> <code>/addUser</code>, <code>/user/{id}</code> (REST).</p>
</li>
<li>
<p><strong>Consumed:</strong> Database.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><strong>Technology</strong></dt>
<dd>
<p>Node.js/Express.</p>
</dd>
</dl>
</div>
<hr>
</div>
<div class="sect4">
<h5 id="_question_service"><code>Question Service</code></h5>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>Responsibility</strong></dt>
<dd>
<p>Storage and retrieval of generated questions.</p>
</dd>
<dt class="hdlist1"><strong>Interfaces</strong></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><strong>Provided:</strong> <code>/addQuestion</code>, <code>/questions</code> (REST).</p>
</li>
<li>
<p><strong>Consumed:</strong> Database.</p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<hr>
</div>
<div class="sect4">
<h5 id="_history_service"><code>History Service</code></h5>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>Responsibility</strong></dt>
<dd>
<p>Persists game history and calculates aggregated statistics.</p>
</dd>
<dt class="hdlist1"><strong>Interfaces</strong></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><strong>Provided:</strong> <code>/addGame</code>, <code>/stats</code>, <code>/getBestGames</code>, <code>/getAllGames</code>.</p>
</li>
<li>
<p><strong>Consumed:</strong> Database (Mongoose).</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><strong>Technology</strong></dt>
<dd>
<p>Node.js, Express, Mongoose.</p>
</dd>
</dl>
</div>
<hr>
</div>
<div class="sect4">
<h5 id="_wikidata_service"><code>Wikidata Service</code></h5>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>Responsibility</strong></dt>
<dd>
<p>Facade and cache for Wikidata. Queries SPARQL, processes, and caches data.</p>
</dd>
<dt class="hdlist1"><strong>Interfaces</strong></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><strong>Provided:</strong> <code>/api/entries/{…}</code>.</p>
</li>
<li>
<p><strong>Consumed:</strong> Wikidata SPARQL endpoint and database (Mongoose).</p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<hr>
</div>
<div class="sect4">
<h5 id="_llm_service_hint_service"><code>LLM Service</code> (Hint Service)</h5>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>Responsibility</strong></dt>
<dd>
<p>Orchestrates question and hint generation. Fetches base data from Wikidata, calls external LLM, formats, and persists questions.</p>
</dd>
<dt class="hdlist1"><strong>Interfaces</strong></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><strong>Provided:</strong> <code>/generateQuestions</code>, <code>/getHint</code>, <code>/getHintWithQuery</code>.</p>
</li>
<li>
<p><strong>Consumed:</strong> Gateway → Wikidata Service, external LLM API, Gateway → Question Service.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><strong>Technology</strong></dt>
<dd>
<p>Node.js, Express, Axios, @google/genai.</p>
</dd>
</dl>
</div>
<hr>
</div>
<div class="sect4">
<h5 id="_database"><code>Database</code></h5>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>Responsibility</strong></dt>
<dd>
<p>Persistent storage for users, history, questions, and Wikidata cache.</p>
</dd>
<dt class="hdlist1"><strong>Interfaces</strong></dt>
<dd>
<p>MongoDB driver consumed by services.</p>
</dd>
<dt class="hdlist1"><strong>Technology</strong></dt>
<dd>
<p>MongoDB.</p>
</dd>
</dl>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_important_interfaces_summary">5.3. Important Interfaces (Summary)</h3>
<hr>
<div class="paragraph text-center">
<p><em>Summary of key interfaces.</em></p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 14.2857%;">
<col style="width: 42.8571%;">
<col style="width: 14.2857%;">
<col style="width: 28.5715%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-center valign-top">Interface Name</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-center valign-top">Provided By</th>
<th class="tableblock halign-center valign-top">Consumed By</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">Gateway API (REST)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>API for WebApp (auth, game, hints, profile, stats, proxy).</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">Gateway Service</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">WebApp</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">Auth Service API</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Internal API for login/token.</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">Auth Service</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">Gateway Service</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">Users Service API</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>CRUD for users.</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">Users Service</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">Gateway Service, Auth Service</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">Question Service API</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Save/retrieve questions.</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">Question Service</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">Gateway Service (and LLM Service)</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">History Service API</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Save results and stats.</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">History Service</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">Gateway Service</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">Wikidata Service API</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Processed data from Wikidata.</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">Wikidata Service</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">Gateway Service (and LLM Service)</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">LLM Service API</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Question and hint generation.</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">LLM Service</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">Gateway Service</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">Database Access</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>MongoDB query interface.</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">Database</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">All services</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">Wikidata SPARQL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>External endpoint for raw Wikidata data.</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">Wikidata (External)</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">Wikidata Service</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">External LLM API</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>AI text provider.</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">LLM Provider</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">LLM Service</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="level2-refinements">6. Level 2 (Refinements)</h2>
<div class="sectionbody">
<hr>
<div class="sect2">
<h3 id="_white_box_llm_service_hint_service">6.1. White Box LLM Service (Hint Service)</h3>
<div class="sect3">
<h4 id="_motivation_llm_service_focus">6.1.1. Motivation (LLM Service Focus)</h4>
<hr>
<div class="paragraph">
<p>This service encapsulates the complex logic of interacting with external providers (LLM, Wikidata Service) and coordinates multiple steps to generate questions and hints.</p>
</div>
</div>
<div class="sect3">
<h4 id="_internal_logic_flow_responsibilities">6.1.2. Internal Logic Flow / Responsibilities</h4>
<div class="sect4">
<h5 id="_question_generation_orchestration_generatequestions_endpoint">Question Generation Orchestration (<code>/generateQuestions</code> endpoint)</h5>
<hr>
<div class="imageblock text-center">
<div class="content">
<img src="./images/BuildingBlockViewGenerateQuestions.png" alt="Generation Questions Flow Diagram">
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Receives category and number of questions from the Gateway Service.</p>
</li>
<li>
<p>Requests base data (including <code>imageUrl</code>) from the Wikidata Service via Gateway.</p>
</li>
<li>
<p>For each entry:</p>
<div class="ulist">
<ul>
<li>
<p>Formats textual information (<code>formatEntryInfo</code>).</p>
</li>
<li>
<p>Constructs a detailed prompt for the external LLM.</p>
</li>
<li>
<p>Calls the LLM API (<code>sendQuestionToLLM</code>).</p>
</li>
<li>
<p>Parses and validates the JSON response (<code>parseJsonResponse</code>), retrying if needed.</p>
</li>
<li>
<p>Combines generated text with the <code>imageUrl</code>.</p>
</li>
<li>
<p>Persists the question via the <code>/addQuestion</code> endpoint on the Gateway.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Aggregates all generated questions and returns them to the Gateway Service.</p>
</li>
</ol>
</div>
<hr>
</div>
<div class="sect4">
<h5 id="_hint_generation_gethint_endpoint">Hint Generation (<code>/getHint</code> endpoint)</h5>
<hr>
<div class="imageblock text-center">
<div class="content">
<img src="./images/BuildingBlockViewHintRequest.png" alt="Get Hint Flow Diagram">
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Receives the question text and answer options from the Gateway Service.</p>
</li>
<li>
<p>Builds a prompt requesting a hint without revealing the correct answer.</p>
</li>
<li>
<p>Calls the LLM API and parses the response.</p>
</li>
<li>
<p>Returns a single-sentence hint.</p>
</li>
</ol>
</div>
<hr>
</div>
<div class="sect4">
<h5 id="_conversational_hint_generation_gethintwithquery_endpoint">Conversational Hint Generation (<code>/getHintWithQuery</code> endpoint)</h5>
<hr>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Similar to <code>/getHint</code>, but incorporates a user-specific query.</p>
</li>
<li>
<p>Filters to prevent direct answer disclosure.</p>
</li>
<li>
<p>Builds and sends the prompt to the LLM, parses, and returns the conversational hint.</p>
</li>
</ol>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="level3-concepts">7. Level 3 (Refinements / Concepts)</h2>
<div class="sectionbody">
<hr>
<div class="sect2">
<h3 id="_concept_question_generation_and_storage_flow">7.1. Concept: Question Generation and Storage Flow</h3>
<div class="paragraph">
<p><strong>Involved components:</strong> Gateway Service, LLM Service, Wikidata Service, Question Service, Database, Wikidata SPARQL, External LLM.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>WebApp requests questions by category from the Gateway.</p>
</li>
<li>
<p>Gateway routes to LLM Service (<code>/generateQuestions</code>).</p>
</li>
<li>
<p>LLM Service fetches base data from Wikidata Service via Gateway.</p>
</li>
<li>
<p>Wikidata Service returns cached data.</p>
</li>
<li>
<p>LLM Service formats and sends a prompt to the external LLM.</p>
</li>
<li>
<p>LLM responds in JSON; LLM Service parses and validates.</p>
</li>
<li>
<p>LLM Service merges text and image, then calls <code>/addQuestion</code> via Gateway.</p>
</li>
<li>
<p>Gateway routes to Question Service, which stores it in the database.</p>
</li>
<li>
<p>LLM Service returns the questions to the original caller.</p>
</li>
</ol>
</div>
<hr>
</div>
<div class="sect2">
<h3 id="_concept_statistics_calculation">7.2. Concept: Statistics Calculation</h3>
<div class="paragraph">
<p><strong>Responsible component:</strong> History Service</p>
</div>
<div class="paragraph">
<p>When <code>/stats</code> is called:
* Retrieves all user game records.
* Calculates aggregated statistics in memory (total points, number of games, win/loss ratio, averages, most played category).
* Returns results, including the top 3 games.</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>⚠️ For users with very large histories, performance may degrade if all records are loaded into memory.</p>
</div>
</blockquote>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="section-runtime-view">8. Runtime View</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Runtime View illustrates how the different components of the system interact at runtime to fulfill specific use cases. It focuses on the dynamic behavior of the system, describing the communication between the frontend, gateway, and backend microservices. Each diagram represents a specific user action or system event, highlighting the sequence of requests, validations, and data flows involved.</p>
</div>
<div class="paragraph">
<p>These diagrams help clarify how responsibilities are distributed across services and how data moves through the architecture during key operations such as user registration, login, password changes, and question generation.</p>
</div>
<div class="sect3">
<h4 id="_user_registration">8.1. User Registration</h4>
<div class="imageblock">
<div class="content">
<img src="./images/sequence-user-registration.png" alt="User Registration Diagram">
</div>
</div>
</div>
<div class="sect3">
<h4 id="_user_login">8.2. User Login</h4>
<div class="imageblock">
<div class="content">
<img src="./images/sequence-user-login.png" alt="User Login Diagram">
</div>
</div>
</div>
<div class="sect3">
<h4 id="_question_generation">8.3. Question Generation</h4>
<div class="imageblock">
<div class="content">
<img src="./images/sequence-question-generation.png" alt="Diagrama de generación de preguntas">
</div>
</div>
</div>
<div class="sect3">
<h4 id="_answering_a_question">8.4. Answering a Question</h4>
<div class="imageblock">
<div class="content">
<img src="./images/sequence-answering-question.png" alt="Diagrama de respuesta a una pregunta">
</div>
</div>
</div>
<div class="sect3">
<h4 id="_ask_for_a_hint_to_the_ai_chat">8.5. Ask for a hint to the AI Chat</h4>
<div class="imageblock">
<div class="content">
<img src="./images/sequence-ask-hint.png" alt="Diagrama de preguna a la IA">
</div>
</div>
</div>
<div class="sect3">
<h4 id="_user_password_change">8.6. User Password Change</h4>
<div class="imageblock">
<div class="content">
<img src="./images/sequence-password-change.png" alt="Diagrama de cambio de contraseña">
</div>
</div>
<div class="sidebarblock arc42help">
<div class="content">
<div class="paragraph">
<div class="title">Contents</div>
<p>The runtime view describes concrete behavior and interactions of the system’s building blocks in form of scenarios from the following areas:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>important use cases or features: how do building blocks execute them?</p>
</li>
<li>
<p>interactions at critical external interfaces: how do building blocks cooperate with users and neighboring systems?</p>
</li>
<li>
<p>operation and administration: launch, start-up, stop</p>
</li>
<li>
<p>error and exception scenarios</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Remark: The main criterion for the choice of possible scenarios (sequences, workflows) is their <strong>architectural relevance</strong>. It is <strong>not</strong> important to describe a large number of scenarios. You should rather document a representative selection.</p>
</div>
<div class="paragraph">
<div class="title">Motivation</div>
<p>You should understand how (instances of) building blocks of your system perform their job and communicate at runtime.
You will mainly capture scenarios in your documentation to communicate your architecture to stakeholders that are less willing or able to read and understand the static models (building block view, deployment view).</p>
</div>
<div class="paragraph">
<div class="title">Form</div>
<p>There are many notations for describing scenarios, e.g.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>numbered list of steps (in natural language)</p>
</li>
<li>
<p>activity diagrams or flow charts</p>
</li>
<li>
<p>sequence diagrams</p>
</li>
<li>
<p>BPMN or EPCs (event process chains)</p>
</li>
<li>
<p>state machines</p>
</li>
<li>
<p>&#8230;&#8203;</p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title">Further Information</div>
<p>See <a href="https://docs.arc42.org/section-6/">Runtime View</a> in the arc42 documentation.</p>
</div>
<div class="paragraph">
<p>Esto es lo que estaba escrito antes:</p>
</div>
<div class="paragraph">
<p>=== &lt;Runtime Scenario 1&gt;</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>&lt;insert runtime diagram or textual description of the scenario&gt;</em></p>
</li>
<li>
<p><em>&lt;insert description of the notable aspects of the interactions between the
building block instances depicted in this diagram.&gt;</em></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>It is possible to use a sequence diagram:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/Sequence%20diagram.png" alt="Sequence diagram" width="332" height="335">
</div>
</div>
<div class="paragraph">
<p>=== &lt;Runtime Scenario 2&gt;</p>
</div>
<div class="paragraph">
<p>=== &#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>=== &lt;Runtime Scenario n&gt;</p>
</div>
</div>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="section-deployment-view">9. Deployment View</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_infrastructure_level_1">9.1. Infrastructure Level 1</h3>
<div class="imageblock">
<div class="content">
<img src="./images/Deployment%20View.png" alt="Deployment View" width="1744" height="671">
</div>
</div>
<div class="paragraph">
<p>In addition to what is shown in the diagram, we will also use arc42 for documentation.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Motivation</dt>
<dd>
<p>Initially, the application is deployed using Docker in developers systems, depending on resource availability. This way, each developer will have a local deployment environment for testing.</p>
</dd>
<dt class="hdlist1">Quality and/or Performance Features</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>The system is designed with microservices, each running in its own container for better scalability and fault tolerance.</p>
</li>
<li>
<p>A <strong>database service</strong> will be used for structured data, and a <strong>File Storage Service</strong> will handle multimedia content.</p>
</li>
<li>
<p><strong>arc42 documentation</strong> will be managed within a dedicated Docker container.</p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="section-concepts">10. Cross-cutting Concepts</h2>
<div class="sectionbody">
<div class="sidebarblock arc42help">
<div class="content">
<div class="paragraph">
<div class="title">Content</div>
<p>This section describes overall, principal regulations and solution ideas that are relevant in multiple parts (= cross-cutting) of your system.
Such concepts are often related to multiple building blocks.
They can include many different topics, such as</p>
</div>
<div class="ulist">
<ul>
<li>
<p>models, especially domain models</p>
</li>
<li>
<p>architecture or design patterns</p>
</li>
<li>
<p>rules for using specific technology</p>
</li>
<li>
<p>principal, often technical decisions of an overarching (= cross-cutting) nature</p>
</li>
<li>
<p>implementation rules</p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title">Motivation</div>
<p>Concepts form the basis for <em>conceptual integrity</em> (consistency, homogeneity) of the architecture.
Thus, they are an important contribution to achieve inner qualities of your system.</p>
</div>
<div class="paragraph">
<p>Some of these concepts cannot be assigned to individual building blocks, e.g. security or safety.</p>
</div>
<div class="paragraph">
<div class="title">Form</div>
<p>The form can be varied:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>concept papers with any kind of structure</p>
</li>
<li>
<p>cross-cutting model excerpts or scenarios using notations of the architecture views</p>
</li>
<li>
<p>sample implementations, especially for technical concepts</p>
</li>
<li>
<p>reference to typical usage of standard frameworks (e.g. using Hibernate for object/relational mapping)</p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title">Structure</div>
<p>A potential (but not mandatory) structure for this section could be:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Domain concepts</p>
</li>
<li>
<p>User Experience concepts (UX)</p>
</li>
<li>
<p>Safety and security concepts</p>
</li>
<li>
<p>Architecture and design patterns</p>
</li>
<li>
<p>"Under-the-hood"</p>
</li>
<li>
<p>development concepts</p>
</li>
<li>
<p>operational concepts</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Note: it might be difficult to assign individual concepts to one specific topic
on this list.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/08-concepts-EN.drawio.png" alt="Possible topics for crosscutting concepts">
</div>
</div>
<div class="paragraph">
<div class="title">Further Information</div>
<p>See <a href="https://docs.arc42.org/section-8/">Concepts</a> in the arc42 documentation.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_user_experience_ux">10.1. User Experience (UX)</h3>
<div class="ulist">
<ul>
<li>
<p><strong>Usable Interface:</strong></p>
</li>
</ul>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ease of Use</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A simple, predictable, and familiar interface design will be presented, ensuring that all essential elements and options of the application are easily accessible.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Intuitive</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The system will provide an intuitive interface, making it easy for users to understand.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Stability</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The application&#8217;s loading times will be minimized to ensure a smooth experience.</p></td>
</tr>
</tbody>
</table>
<div class="ulist">
<ul>
<li>
<p><strong>Immediate Feedback:</strong> The user will instantly see whether their answer was correct or not. Additionally, the game history, rankings, and generated questions will always be up to date.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_security_protection">10.2. Security &amp; Protection</h3>
<div class="ulist">
<ul>
<li>
<p><strong>Secure Access Control:</strong> User authentication security will be enforced by verifying the correctness of the entered credentials and denying access otherwise.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_under_the_hood">10.3. Under-the-Hood</h3>
<div class="ulist">
<ul>
<li>
<p><strong>Persistence:</strong> Both user data and game records will be stored to ensure their integrity and availability.</p>
</li>
<li>
<p><strong>Maintainability:</strong> The code is written clearly and legibly, following a modular approach to facilitate maintenance when fixing bugs or adding improvements.</p>
</li>
<li>
<p><strong>Extensibility:</strong> The application is built in a way that allows new functionalities to be added easily in the future without significantly affecting existing components.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_development">10.4. Development</h3>
<div class="ulist">
<ul>
<li>
<p><strong>Implementation:</strong> The application will be developed using JavaScript. The front-end will be built with React, while Node.js and microservices architecture will be used for the back-end. MongoDB will be used for managing the NoSQL database.</p>
</li>
<li>
<p><strong>Testing:</strong> Various tests will be conducted to ensure a high-quality product.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_architectural_style">10.5. Architectural Style</h3>
<div class="ulist">
<ul>
<li>
<p><strong>Layers:</strong> A three-layer architecture will be implemented to ensure better organization and modularity:</p>
</li>
</ul>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Presentation</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Responsible for operating and generating the graphical interface displayed to the user.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Business Logic</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Where all the necessary logic for the correct operation of the application will be executed.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Persistence</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Used to store and retrieve various data needed for both the player and the question-and-answer game system.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_concept_map">10.6. Concept Map</h3>
<div class="imageblock">
<div class="content">
<img src="./images/Cross-cutting_Concepts.jpg" alt="Cross cutting Concepts">
</div>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="section-design-decisions">11. Architecture Decisions</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To document the architectural decisions of the project, we have created individual pages in the GitHub Wiki. This approach allows us to provide a detailed explanation of each decision without cluttering the main documentation. Each page includes the rationale behind the decision, as well as its advantages and disadvantages.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_technology_decisions">12. Technology Decisions</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/Arquisoft/wichat_es6a/wiki/Architecture-Decisions-%E2%80%90-Javascript">JavaScript</a></p>
</li>
<li>
<p><a href="https://github.com/Arquisoft/wichat_es6a/wiki/Architecture-Decisions-%E2%80%90-Node.js">Node.js</a></p>
</li>
<li>
<p><a href="https://github.com/Arquisoft/wichat_es6a/wiki/Architecture-Decisions-%E2%80%90-React">React</a></p>
</li>
<li>
<p><a href="https://github.com/Arquisoft/wichat_es6a/wiki/Architecture-Decisions-%E2%80%90-MongoDB">MongoDB</a></p>
</li>
<li>
<p><a href="https://github.com/Arquisoft/wichat_es6a/wiki/Architecture-Decisions-%E2%80%90-Docker">Docker</a></p>
</li>
<li>
<p><a href="https://github.com/Arquisoft/wichat_es6a/wiki/Architecture-Decisions-%E2%80%90-Grafana-and-Prometheus">Grafana and Prometheus</a></p>
</li>
<li>
<p><a href="https://github.com/Arquisoft/wichat_es6a/wiki/Architecture-Decisions-%E2%80%90-Gemini">Gemini</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Each decision was made based on the project requirements, the team’s prior experience, and the technologies provided in the base template.</p>
</div>
<div class="sidebarblock arc42help">
<div class="content">
<div class="paragraph">
<div class="title">Contents</div>
<p>Important, expensive, large scale or risky architecture decisions including rationales.
With "decisions" we mean selecting one alternative based on given criteria.</p>
</div>
<div class="paragraph">
<p>Please use your judgement to decide whether an architectural decision should be documented
here in this central section or whether you better document it locally
(e.g. within the white box template of one building block).</p>
</div>
<div class="paragraph">
<p>Avoid redundancy.
Refer to section 4, where you already captured the most important decisions of your architecture.</p>
</div>
<div class="paragraph">
<div class="title">Motivation</div>
<p>Stakeholders of your system should be able to comprehend and retrace your decisions.</p>
</div>
<div class="paragraph">
<div class="title">Form</div>
<p>Various options:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>ADR (<a href="https://cognitect.com/blog/2011/11/15/documenting-architecture-decisions">Documenting Architecture Decisions</a>) for every important decision</p>
</li>
<li>
<p>List or table, ordered by importance and consequences or:</p>
</li>
<li>
<p>more detailed in form of separate sections per decision</p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title">Further Information</div>
<p>See <a href="https://docs.arc42.org/section-9/">Architecture Decisions</a> in the arc42 documentation.
There you will find links and examples about ADR.</p>
</div>
</div>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
<div class="sect1">
<h2 id="section-quality-scenarios">13. Quality Requirements</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <strong>WIChat</strong> system prioritizes five critical quality attributes to ensure success:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong>Usability</strong>:</p>
<div class="ulist">
<ul>
<li>
<p>Goal: An intuitive interface that allows users to play, access hints, view/edit their profile, and inspect their game statistics with minimal friction.</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Maintainability</strong>:</p>
<div class="ulist">
<ul>
<li>
<p>Goal: Modular, well-documented codebase (separation of concerns, clear folder structure, descriptive comments) to facilitate onboarding and future feature additions (e.g., new quiz categories).</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Performance</strong>:</p>
<div class="ulist">
<ul>
<li>
<p>Goal: Low latency in all interactive operations:</p>
</li>
<li>
<p>Quiz question generation (≤ 200 ms per request under normal load).</p>
</li>
<li>
<p>LLM prompt/response turnaround (≤ 500 ms).</p>
</li>
<li>
<p>Profile and statistics retrieval (≤ 150 ms).</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Security</strong>:</p>
<div class="ulist">
<ul>
<li>
<p>Goal: Robust protection of user credentials and session data, and resistance to common web attacks:</p>
</li>
<li>
<p><strong>Password hashing</strong>: All passwords are salted and hashed with bcrypt before storage.</p>
</li>
<li>
<p><strong>Session tokens</strong>: JWTs signed with strong secret and short TTL (1 h), transmitted via HTTPS; no use of opaque session IDs in URLs.</p>
</li>
<li>
<p><strong>No token reuse</strong>: Tokens are checked on every request; unable to override identity by simply including a different token.</p>
</li>
<li>
<p><strong>Input validation</strong>: Every input field (e.g., login credentials) is validated</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Functionality</strong>:</p>
<div class="ulist">
<ul>
<li>
<p>Goal: Reliably satisfy core business workflows:</p>
</li>
<li>
<p>Automatic question/answer generation from Wikidata entries (with image support).</p>
</li>
<li>
<p>Conversational hint service with RAG-based hallucination mitigation.</p>
</li>
<li>
<p>Accurate user statistics tracking and retrieval.</p>
</li>
<li>
<p>User profile editing (username, password, avatar) with immediate effect.</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>These quality requirements guide every architectural and implementation decision, ensuring WIChat meets stakeholder expectations and delivers a seamless, secure user experience.</p>
</div>
<div class="sect2">
<h3 id="_quality_tree">13.1. Quality Tree</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 50%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Quality Attribute</th>
<th class="tableblock halign-left valign-top">Goal/Description</th>
<th class="tableblock halign-left valign-top">Associated Scenarios</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Usability</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Intuitive UI for gameplay, hints, stats viewing, and profile editing</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#SC-4">[SC-4]</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Maintainability</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Modular, documented code; clear separation of services and helpers</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#SC-5">[SC-5]</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Performance</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Low-latency in question generation, LLM calls, and user data access</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#SC-2">[SC-2]</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Security</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Bcrypt-hashed passwords, JWT auth, input validation</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#SC-3">[SC-3]</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Functionality</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">End-to-end quiz flows, hints with RAG, user stats and profile management</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#SC-1">[SC-1]</a></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_quality_scenarios">13.2. Quality Scenarios</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 22.2222%;">
<col style="width: 22.2222%;">
<col style="width: 22.2222%;">
<col style="width: 22.2223%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Scenario</th>
<th class="tableblock halign-left valign-top">Stimulus / Source</th>
<th class="tableblock halign-left valign-top">Environment</th>
<th class="tableblock halign-left valign-top">Artifact</th>
<th class="tableblock halign-left valign-top">Expected Response</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="SC-1"></a> SC-1: Accurate question generation</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">System requests N new quiz questions</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Normal load</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Wikidata Service &amp; LLM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">All questions match real data; no hallucinations</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="SC-2"></a> SC-2: Performance under concurrent load</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">20 users simultaneously start quizzes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Peak demand</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Quiz API</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Average response ≤ 200 ms</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="SC-3"></a> SC-3: Secure credential handling</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Malicious login attempts (brute-force)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Internet</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Auth Service + Database</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Passwords hashed with bcrypt; input validated; JWT sessions managed securely</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="SC-4"></a> SC-4: Intuitive user interactions</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">New user navigates to hints, stats, profile</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">First use</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Frontend UI</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hints, stats, profile pages load in ≤ 150 ms; clear labels &amp; error feedback</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="SC-5"></a> SC-5: Rapid maintainability</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Developer adds “Art History” category</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Dev environment</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Codebase</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Module and tests added in ≤ 2 hours</p></td>
</tr>
</tbody>
</table>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="section-risks-and-technical-debt">14. Risks and Technical Debt</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_technical_risks">14.1. Technical Risks</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong>Inadequate Version Control Management</strong></p>
<div class="ulist">
<ul>
<li>
<p>Possible Issues</p>
<div class="ulist">
<ul>
<li>
<p>GitHub conflicts due to multiple team members collaborating.</p>
</li>
<li>
<p>Risk of code loss or overwriting.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Preventive Measure</p>
<div class="ulist">
<ul>
<li>
<p>Define a clear Git workflow with mandatory Pull Requests.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Tight Deadlines and Lack of Experience</strong></p>
<div class="ulist">
<ul>
<li>
<p>Possible Issues</p>
<div class="ulist">
<ul>
<li>
<p>Inability to complete planned tasks due to other courses or poor time estimation.</p>
</li>
<li>
<p>Difficulties in implementing advanced features due to lack of experience in JavaScript.</p>
</li>
<li>
<p>Increased number of errors due to limited proficiency in the language.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Preventive Measure</p>
<div class="ulist">
<ul>
<li>
<p>Better task organization and development time estimation.</p>
</li>
<li>
<p>Self-learning of the language to improve proficiency.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Documentation Deficiencies</strong></p>
<div class="ulist">
<ul>
<li>
<p>Possible Issues</p>
<div class="ulist">
<ul>
<li>
<p>Code with few comments and insufficient technical documentation.</p>
</li>
<li>
<p>Difficulty for other team members to understand the existing code.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Preventive Measure</p>
<div class="ulist">
<ul>
<li>
<p>Maintain clear and up-to-date documentation in the GitHub repository.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Lack of Automated Testing</strong></p>
<div class="ulist">
<ul>
<li>
<p>Possible Issues</p>
<div class="ulist">
<ul>
<li>
<p>Dependence on manual testing, which is prone to errors.</p>
</li>
<li>
<p>Increased time to detect and fix bugs.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Preventive Measure</p>
<div class="ulist">
<ul>
<li>
<p>Introduce unit and functional testing using tools like Jest or Mocha.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Lack of Code Standards</strong></p>
<div class="ulist">
<ul>
<li>
<p>Possible Issues</p>
<div class="ulist">
<ul>
<li>
<p>Different programming styles within the team.</p>
</li>
<li>
<p>Difficulty in unifying code from different team members.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Preventive Measure</p>
<div class="ulist">
<ul>
<li>
<p>Define common code standards to ensure consistency and ease of collaboration.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Inefficient and Repetitive Code</strong></p>
<div class="ulist">
<ul>
<li>
<p>Possible Issues</p>
<div class="ulist">
<ul>
<li>
<p>Lack of modularity and code reuse.</p>
</li>
<li>
<p>Difficulty in project maintenance and scalability.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Preventive Measure</p>
<div class="ulist">
<ul>
<li>
<p>Apply modular programming principles and perform periodic refactoring.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Suboptimal Performance</strong></p>
<div class="ulist">
<ul>
<li>
<p>Possible Issues</p>
<div class="ulist">
<ul>
<li>
<p>Inefficient use of data structures and algorithms.</p>
</li>
<li>
<p>Potential performance issues during application execution.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Preventive Measure</p>
<div class="ulist">
<ul>
<li>
<p>Review and optimize the code once it is functional.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_technical_debt">14.2. Technical Debt</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong>Tasks organization</strong></p>
<div class="ulist">
<ul>
<li>
<p>Poor organization of the tasks to be carried out. We started by selecting a few key points to work on, but as we developed them and due to the relationships between them, we ended up covering more than what was initially selected. As a result, our current application has a significant amount of development across all parts, but none of them are fully complete or entirely functional.</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>No Tests created</strong></p>
<div class="ulist">
<ul>
<li>
<p>Functionality has been developed, but no testing has been done. This means our code has a coverage percentage below the required level, and it is not entirely clear whether everything implemented works correctly. Tests must be carried out as soon as possible, and proper planning is necessary since they take time and should not affect development.</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Tests created with low coverage</strong></p>
<div class="ulist">
<ul>
<li>
<p>Initially, tests were created with a low coverage percentage. While some progress has been made in increasing the test coverage, it is still under 80%. Efforts need to continue to ensure comprehensive test coverage across the application.</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Using Empathy, but switching to Gemini</strong></p>
<div class="ulist">
<ul>
<li>
<p>We initially used Empathy for LLM-based responses. However, the model frequently failed, causing delays and extra work. Over time, this debt accumulated, and we eventually replaced it with Gemini. This decision helped stabilize the application&#8217;s performance but caused some disruptions earlier in development.</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Direct service calls without using the Gateway</strong></p>
<div class="ulist">
<ul>
<li>
<p>At the start, services were implemented and called directly without using a Gateway. This decision led to technical debt, as we had to invest significant time later in the development process to refactor and introduce the Gateway, which is necessary for scalability and proper separation of concerns.</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Insufficient documentation updates</strong></p>
<div class="ulist">
<ul>
<li>
<p>The documentation was not sufficiently updated during development, leading to discrepancies between the actual implementation and the documentation. As a result, certain parts of the project were not properly reflected, making it difficult for team members and future contributors to follow the project flow.</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Initial game images generated with AI causing delays</strong></p>
<div class="ulist">
<ul>
<li>
<p>At first, we used AI to generate images for the game based on the questions. However, this approach led to increased wait times, and the quality of the images was not optimal. Subsequently, time was spent switching to images obtained from Wikidata, which was a more efficient solution.</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="section-glossary">15. Glossary</h2>
<div class="sectionbody">
<div class="sidebarblock arc42help">
<div class="content">
<div class="paragraph">
<div class="title">Contents</div>
<p>The most important domain and technical terms that your stakeholders use when discussing the system.</p>
</div>
<div class="paragraph">
<p>You can also see the glossary as source for translations if you work in multi-language teams.</p>
</div>
<div class="paragraph">
<div class="title">Motivation</div>
<p>You should clearly define your terms, so that all stakeholders</p>
</div>
<div class="ulist">
<ul>
<li>
<p>have an identical understanding of these terms</p>
</li>
<li>
<p>do not use synonyms and homonyms</p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title">Form</div>
<p>A table with columns &lt;Term&gt; and &lt;Definition&gt;.</p>
</div>
<div class="paragraph">
<p>Potentially more columns in case you need translations.</p>
</div>
<div class="paragraph">
<div class="title">Further Information</div>
<p>See <a href="https://docs.arc42.org/section-12/">Glossary</a> in the arc42 documentation.</p>
</div>
</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Term</th>
<th class="tableblock halign-left valign-top">Definition</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>JavaScript</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>JavaScript is a high-level, dynamic, and event-driven programming language primarily used for web development. It is an interpreted language, prototype-based, and weakly typed, running in the browser through the JavaScript engine. It can also be used on the backend with environments like Node.js.</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Frontend</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>JavaScript in the frontend is used to manipulate the DOM, handle events, and enhance web interactivity. It runs in the browser and works alongside HTML and CSS to create dynamic experiences. Frameworks like React make it easier to develop more structured and efficient applications.</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>React</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>React is a JavaScript library for building user interfaces efficiently and modularly. It follows a component-based approach and uses a Virtual DOM to improve performance. Developed by Facebook, it is primarily used in the frontend to create interactive and dynamic web applications.</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Backend</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>On the backend, JavaScript is used with environments like Node.js to handle servers, databases, and business logic. It enables API creation, HTTP request management, and database connections with systems like MongoDB.</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Node.js</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Node.js is a JavaScript runtime environment based on Chrome&#8217;s V8 engine, designed to execute code outside the browser. It is asynchronous and event-driven, making it ideal for real-time applications and scalable servers. It uses the CommonJS module system and has npm for package and dependency management.</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>MongoDB</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>MongoDB is a NoSQL document-oriented database that stores data in BSON format (similar to JSON). It is scalable, flexible, and allows handling large amounts of data without a fixed structure. It integrates well with Node.js and is commonly used in modern web applications.</em></p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Version 8.2 EN<br>
Last updated 2025-04-25 11:52:04 +0200
</div>
</div>
</body>
</html>